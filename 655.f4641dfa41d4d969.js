"use strict";(self.webpackChunkPracticalAssessment=self.webpackChunkPracticalAssessment||[]).push([[655],{1655:(D,p,i)=>{i.r(p),i.d(p,{OrdersModule:()=>b});var u=i(6895),a=i(4843),t=i(4650),d=i(5759),l=i(6257);let g=(()=>{class r{transform(e){return e&&(e=e.toString().replace(/\d{4}(?=.)/g,"$& "),new Date(Date.parse(e)).toISOString().replace("T"," ").replace(".000Z",""))}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275pipe=t.Yjl({name:"dataTime",type:r,pure:!0})}return r})();function h(r,n){1&r&&t._uU(0,"Order")}function Z(r,n){1&r&&t._uU(0,"Products")}function O(r,n){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",11),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()()),2&r){const e=n.$implicit;t.xp6(2),t.Oqu(e.ProductName),t.xp6(2),t.s9C("src",e.ProductImg,t.LSH),t.xp6(2),t.Oqu(e.ProductPrice),t.xp6(2),t.Oqu(e.Quantity),t.xp6(2),t.Oqu(e.AvailablePieces)}}function T(r,n){1&r&&t._uU(0,"User")}function _(r,n){if(1&r&&(t.ynx(0),t.TgZ(1,"mat-stepper",2,3)(3,"mat-step"),t.YNc(4,h,1,0,"ng-template",4),t.TgZ(5,"div",5)(6,"div",6)(7,"h4"),t._uU(8,"Order Details"),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"Order Date"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Payment Type"),t.qZA()()(),t.TgZ(20,"tbody")(21,"tr")(22,"td"),t._uU(23),t.ALo(24,"dataTime"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA()()()()()()()(),t.TgZ(29,"mat-step"),t.YNc(30,Z,1,0,"ng-template",4),t.TgZ(31,"div",5)(32,"div",6)(33,"h4"),t._uU(34,"Products Details"),t.qZA()(),t.TgZ(35,"div",7)(36,"div",8)(37,"table",9)(38,"thead")(39,"tr")(40,"th"),t._uU(41,"ProductName"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"ProductImg"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"ProductPrice"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Quantity"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"AvailablePieces"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,O,11,5,"tr",10),t.qZA()()()()()(),t.TgZ(52,"mat-step"),t.YNc(53,T,1,0,"ng-template",4),t.TgZ(54,"div",5)(55,"div",6)(56,"h4"),t._uU(57,"User Details"),t.qZA()(),t.TgZ(58,"div",7)(59,"div",8)(60,"table",9)(61,"thead")(62,"tr")(63,"th"),t._uU(64,"Name"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Email"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Phone"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Address"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"RegisterDate"),t.qZA()()(),t.TgZ(73,"tbody")(74,"tr")(75,"td"),t._uU(76),t.qZA(),t.TgZ(77,"td"),t._uU(78),t.qZA(),t.TgZ(79,"td"),t._uU(80),t.qZA(),t.TgZ(81,"td"),t._uU(82),t.qZA(),t.TgZ(83,"td"),t._uU(84),t.ALo(85,"dataTime"),t.qZA()()()()()()()()(),t.BQk()),2&r){const e=t.oxw();t.xp6(23),t.Oqu(t.lcZ(24,9,e.order.OrderDate)),t.xp6(3),t.Oqu(e.total),t.xp6(2),t.Oqu(e.order.PaymentType),t.xp6(23),t.Q6J("ngForOf",e.orderProducts),t.xp6(25),t.Oqu(e.user.Name),t.xp6(2),t.Oqu(e.user.Email),t.xp6(2),t.Oqu(e.user.Phone),t.xp6(2),t.Oqu(e.user.Address),t.xp6(2),t.Oqu(t.lcZ(85,11,e.user.RegisterDate))}}function f(r,n){1&r&&(t.TgZ(0,"section",12)(1,"div",13)(2,"p"),t._uU(3," Sorry There's No Data To Show"),t.qZA(),t.TgZ(4,"small"),t._uU(5,"Select New Order"),t.qZA()()())}let U=(()=>{class r{constructor(e,s,o,c){this.route=e,this.ordersService=s,this.productsService=o,this.customersService=c,this.total=0,this.orderProducts=[],this.order={},this.user={}}ngOnInit(){this.getParams()}getParams(){this.route.params.subscribe(e=>{e.id&&this.getOrderById(+e.id)})}getOrderById(e){this.ordersService.getOrderById(e).subscribe(s=>{s&&(this.order=s[0],this.getUserData(s[0].UserId),this.getOrderProductsIds(s[0].Products))})}getUserData(e){this.customersService.getUserByUserId(e).subscribe(s=>{this.user=s[0]})}getOrderProductsIds(e){let s=e.map(o=>o.ProductId);s.length&&this.getOrderProductsByIds(s)}getOrderProductsByIds(e){this.productsService.getOrderProductsByIdsList(e).subscribe(s=>{s.length&&this.joinquantityToEachPorduct(s)})}joinquantityToEachPorduct(e){this.orderProducts=e.map(s=>{const o=this.order.Products.find(c=>c.ProductId===s.ProductId);return{...s,...o}}),this.calcOrderTotal()}calcOrderTotal(){this.total=this.orderProducts.reduce((e,s)=>e+s.Quantity*s.ProductPrice,0)}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(a.gz),t.Y36(d.Nz),t.Y36(d.su),t.Y36(d.ve))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-details"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noOrderFound",""],["linear",""],["stepper",""],["matStepLabel",""],[1,"card","mt-3"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["alt","","width","50",3,"src"],[1,"no-order-found","w-100","d-flex","flex-column","align-items-center","justify-content-center","text-center"],[1,""]],template:function(s,o){if(1&s&&(t.YNc(0,_,86,13,"ng-container",0),t.YNc(1,f,6,0,"ng-template",null,1,t.W1O)),2&s){const c=t.MAs(2);t.Q6J("ngIf",o.order&&o.order.OrderId)("ngIfElse",c)}},dependencies:[u.sg,u.O5,l.C0,l.VY,l.Vq,g],styles:[".card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:var(--title-font-size)}.no-order-found[_ngcontent-%COMP%]{min-height:100%}@media (max-width: 576px){[_nghost-%COMP%]     .mat-horizontal-content-container{padding:0!important}}"]})}return r})();var A=i(4859),q=i(9665);let P=(()=>{class r{constructor(e){this.CustomersService=e}transform(e){return this.CustomersService.getUserNameByUserId(e)}ngOnInit(){}ngOnDestroy(){}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(d.ve,16))};static#e=this.\u0275pipe=t.Yjl({name:"orderUserName",type:r,pure:!0})}return r})();function y(r,n){if(1&r&&(t.TgZ(0,"tr")(1,"th",5),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"orderUserName"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t._UZ(8,"td",6),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"dataTime"),t.qZA(),t.TgZ(14,"td")(15,"button",7),t._uU(16,"Details"),t.qZA()()()),2&r){const e=n.$implicit,s=n.index;t.xp6(2),t.Oqu(s+1),t.xp6(2),t.Oqu(t.lcZ(5,7,e.UserId)),t.xp6(3),t.Oqu(e.OrderId),t.xp6(1),t.Q6J("products",e.Products),t.xp6(2),t.Oqu(e.PaymentType),t.xp6(2),t.Oqu(t.lcZ(13,9,e.OrderDate)),t.xp6(3),t.MGl("routerLink","/orders/order-details/",e.OrderId,"")}}let m=(()=>{class r{constructor(e,s,o){this.OrdersService=e,this.CustomersService=s,this.ProductsService=o,this.ordersList=[]}ngOnInit(){this.getPorductsList(),this.CustomersService.getCustomersList(),this.getOrdersList()}getOrdersList(){this.OrdersService.getOrdersList().subscribe(e=>{this.ordersList=e})}getPorductsList(){this.ProductsService.getProductsList().subscribe()}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(d.Nz),t.Y36(d.ve),t.Y36(d.su))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders-list"]],decls:21,vars:1,consts:[["mat-flat-button","","color","primary","routerLink","order-details",1,"d-none"],[1,"table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["appCountOrderTotal","",3,"products"],["mat-flat-button","","color","primary",1,"d",3,"routerLink"]],template:function(s,o){1&s&&(t.TgZ(0,"button",0),t._uU(1,"Details"),t.qZA(),t.TgZ(2,"div",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"User Name"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Order Id"),t.qZA(),t.TgZ(12,"th",3),t._uU(13,"Total"),t.qZA(),t.TgZ(14,"th",3),t._uU(15,"Payment Type"),t.qZA(),t.TgZ(16,"th",3),t._uU(17,"Order Date"),t.qZA(),t._UZ(18,"th",3),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,y,17,11,"tr",4),t.qZA()()()),2&s&&(t.xp6(20),t.Q6J("ngForOf",o.ordersList))},dependencies:[u.sg,a.rH,A.lW,q.p,g,P]})}return r})();const v=[{path:"",component:(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],decls:1,vars:0,template:function(s,o){1&s&&t._UZ(0,"router-outlet")},dependencies:[a.lC]})}return r})(),children:[{path:"",component:m},{path:"orders",component:m},{path:"order-details/:id",component:U}]}];let x=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(v),a.Bz]})}return r})();var C=i(7205),I=i(6013);let b=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[u.ez,x,C.m,I.R]})}return r})()}}]);